##### MailX Installation Instruction #####

## setup environment ##

# install required linux packages
sudo apt-get install postgresql

# install required python packages
pip install lamson
pip install django
pip install psycopg2

# download mailx
git clone git@github.com:abhardwaj/mailx.git



## make configuration changes ##

# edit lamson configuration setting
cd src/mailx
vi config/settings.py        

# configure your relay_server (exim4 or sendmail) to use port other than 25 (default 587)

# edit django configuration settings (if relay_server port is not 587)
vi http_handler/settings.py 

# setup the database 
psql -U postgres -W -h localhost
create database mailx

# install schema
cd mailx
python manage.py syncdb



## running in development mode ##
# run mailx server
cd mailx
lamson start

# for running the mailx browser
python manage.py runserver

## running in production mode ##

# add the following lines in /etc/apache2/httpd.conf
<VirtualHost *:80>
WSGIDaemonProcess mailx python-path=/home/ubuntu/production/mailx
WSGIScriptAlias / /home/ubuntu/production/mailx/http_handler/wsgi.py process-group=mailx application-group=%{GLOBAL}
Alias /static /home/ubuntu/production/mailx/http_handler/static
</VirtualHost>
